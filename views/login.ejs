<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sign in & Sign up Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/login.css" />
    <!-- Bootstrap CSS -->

  </head>
  <body>
    
    <main>
      <div class="box">
        <div class="inner-box">
          <!-- Forms Wrap - Active class added based on formToShow -->
          <div class="forms-wrap <%= (typeof formToShow !== 'undefined' && formToShow === 'sign-up') ? 'active' : '' %>">
            <!-- Sign-in Form -->
            <form action="/login" method="POST" class="sign-in-form">
              <div class="logo">
                <img src="/img/logo.png" alt="easyclass" />
                <h4>SM Links</h4>
              </div>

              <div class="heading">
                <h2>Welcome Back</h2>
                <h6>Not registered yet?</h6>
                <a href="#" class="toggle">Sign up</a>
              </div>

              <div class="actual-form">
                <div class="input-wrap">
                  <input
                    type="text"
                    minlength="4"
                    class="input-field"
                    name="email"
                    value="<%= (typeof loginFormData !== 'undefined' && loginFormData.email) ? loginFormData.email : '' %>"
                    required
                  />
                  <label>Email</label>
                </div>

                <div class="input-wrap">
                  <input
                    type="password"
                    minlength="4"
                    class="input-field"
                    autocomplete="off"
                    name="password"
                    required
                  />
                  <label>Password</label>
                </div>

                <!-- Display login error if any -->
                <div id="error-message" class="error-message" style="display: none;"></div>


                <input type="submit" value="Sign In" class="sign-btn" />
              </div>
            </form>

            <!-- Sign-up Form -->
            <form action="/register" method="POST" class="sign-up-form">
              <div class="logo">
                <img src="/img/logo.png" alt="SM" />
                <h4>SM Links</h4>
              </div>

              <div class="heading">
                <h2>Get Started</h2>
                <h6>Already have an account?</h6>
                <a href="#" class="toggle">Sign in</a>
              </div>

              <div class="actual-form">
                <div class="input-wrap">
                  <input
                    type="text"
                    minlength="4"
                    class="input-field"
                    autocomplete="off"
                    name="username"
                    value="<%= (typeof registerFormData !== 'undefined' && registerFormData.username) ? registerFormData.username : '' %>"
                    required
                  />
                  <label>User Name</label>
                </div>

                <div class="input-wrap">
                  <input
                    type="email"
                    class="input-field"
                    autocomplete="off"
                    name="email"
                    value="<%= (typeof registerFormData !== 'undefined' && registerFormData.email) ? registerFormData.email : '' %>"
                    required
                  />
                  <label>Email</label>
                </div>
                <div class="input-wrap">
                  <input
                    type="number"
                    minlength="4"
                    class="input-field"
                    autocomplete="off"
                    name="number"
                    required
                  />
                  <label>phone Number</label>
                </div>
                <div class="input-wrap">
                  <input
                    type="password"
                    minlength="4"
                    class="input-field"
                    autocomplete="off"
                    name="password"
                    required
                  />
                  <label>Password</label>
                </div>

                <input type="submit" value="Sign Up" class="sign-btn" />

                <!-- Display registration error if any -->
                <div id="error-message" class="error-message" style="display: none;"></div>


                <p class="text">
                  By signing up, I agree to the <a href="#">Terms of Services</a> and
                  <a href="#">Privacy Policy</a>
                </p>
              </div>
            </form>
          </div>

          <!-- Carousel Section -->
          <div class="carousel">
            <div class="images-wrapper">
              <img src="/img/image1.png" class="image img-1 show" alt="" />
              <img src="/img/image2.png" class="image img-2" alt="" />
              <img src="/img/image3.png" class="image img-3" alt="" />
            </div>

            <div class="text-slider">
              <div class="text-wrap">
                <div class="text-group">
                  <h2>Create your own SM Links</h2>
                  <h2>Customize as you like</h2>
                  <h2>Invite People to your network</h2>
                </div>
              </div>

              <div class="bullets">
                <span class="active" data-value="1"></span>
                <span data-value="2"></span>
                <span data-value="3"></span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Error Message Modal -->
<div class="modal fade" id="errorModal" tabindex="-1" aria-labelledby="errorModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title" id="errorModalLabel">Error</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p id="errorMessage">Something went wrong.</p> <!-- Error Message Here -->
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<!-- Success Message Modal -->
<div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="successModalLabel"></h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p id="successMessage"></p> <!-- Dynamic Message -->
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">OK</button>
      </div>
    </div>
  </div>
</div>


    </main>

    <!-- <script>
        document.addEventListener("DOMContentLoaded", function () {
            const urlParams = new URLSearchParams(window.location.search);
            const error = urlParams.get('error');
            const success = urlParams.get('success');
        
            if (error) {
              
                alert(error);
            }
            if (success) {
                alert(success);
            }
        });
        </script>
         -->
         <script>
          document.addEventListener("DOMContentLoaded", function() {
            // Ensure Bootstrap is loaded
            if (typeof bootstrap === "undefined") {
              console.error("Bootstrap is not loaded. Check script inclusion.");
              return;
            }
        
            // Get error message from URL params
            const params = new URLSearchParams(window.location.search);
            if (params.has("error")) {
              let errorMessage = params.get("error");
              document.getElementById("errorMessage").textContent = errorMessage; // Set error message
              new bootstrap.Modal(document.getElementById("errorModal")).show(); // Show modal
            }
            if (params.has("success")) {
            let message = params.get("success"); // Get message from query string
            document.getElementById("successMessage").textContent = message; // Set modal message
            new bootstrap.Modal(document.getElementById("successModal")).show(); // Show modal
          }
        
          });
        </script>
        
        <!-- Bootstrap JavaScript (Required for Modals) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>


        


    <script src="/js/style.js"></script>
  </body>
</html>